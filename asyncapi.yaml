asyncapi: '2.6.0'
info:
  title: ByronHub
  version: '1.0.0'
  description: Message API facilitating communication between the Web Tier and the Application Tier.

channels:
  person.created:
    description: Event published when a new person is created.
    publish:
      summary: HTTP POST /people triggers this event
      operationId: personCreated
      message:
        $ref: '#/components/messages/PersonCreated'

  person.deleted:
    description: Event published when a person is deleted.
    publish:
      summary: HTTP DELETE /people/{id} triggers this event
      operationId: personDeleted
      message:
        $ref: '#/components/messages/PersonDeleted'

  person.retrieved:
    description: Event published when a person is retrieved by ID.
    publish:
      summary: HTTP GET /people/{id} triggers this event
      operationId: personRetrieved
      message:
        $ref: '#/components/messages/PersonRetrieved'

components:
  messages:
    PersonCreated:
      name: PersonCreated
      title: Person Created Event
      contentType: application/json
      payload:
        $ref: '#/components/schemas/PersonPayload'

    PersonDeleted:
      name: PersonDeleted
      title: Person Deleted Event
      contentType: application/json
      payload:
        type: object
        properties:
          id:
            type: string
            description: ID of the deleted person

    PersonRetrieved:
      name: PersonRetrieved
      title: Person Retrieved Event
      contentType: application/json
      payload:
        $ref: '#/components/schemas/PersonPayload'

  schemas:
    PersonPayload:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        email:
          type: string
        department:
          type: string
        role:
          type: object
          properties:
            name:
              type: string
